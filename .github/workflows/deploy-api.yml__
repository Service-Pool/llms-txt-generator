name: Deploy this App

on:
  workflow_dispatch:

jobs:
  call-deploy:
    uses: Service-Pool/scripts/.github/workflows/reusable-deploy.yml@main
    with:
      repo_url: "git@github.com:${{ github.repository }}.git"
      destination: "/var/www/llms-txt-generator-api"
      branch: "${{ github.ref_name }}"
      pre_deploy: "echo 'Starting deployment...'"
      post_deploy: "cd /var/www/llms-txt-generator-api/.devcontainer/dev && docker compose down && docker compose up --build -d --wait && bash /var/www/llms-txt-generator-api/.devcontainer/dev/cmd-run.sh"